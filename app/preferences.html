<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="styles/preferences.css">
    </head>
    <body>
        <div id="title-bar">AFK Preferences</div>

        <div id="container">
            <div class="field-container">
                <div class="field">
                    <input type="checkbox" id="autolaunch">
                    <label for="autolaunch">Launch at login</label>
                </div>

                <div class="field">
                    <input type="checkbox" id="hide-icon">
                    <label for="hide-icon">Hide menu bar icon</label>
                </div>
            </div>

            <div class="field">
                <label for="mode">Mode:</label>
                <select id="mode">
                    <option value="Screensaver">Screensaver</option>
                    <option value="Sleep">Sleep</option>
                    <option value="Lock">Lock</option>
                </select>
            </div>

            <div class="field-container">
                <div class="field">
                    <label for="global-hotkey">Global hotkey:</label>
                    <input type="text" placeholder="Cmd+Shift+`" id="global-hotkey">
                </div>
                <div class="field" style="width:65px;">
                    <a id="help-button" href="https://github.com/electron/electron/blob/master/docs/api/accelerator.md#available-modifiers">Help</a>
                </div>
            </div>
        </div>
        <script>
            window.$ = window.jQuery = require('jquery')
            const {ipcRenderer, shell} = require('electron')
            const store = require('./store')

            $(document).on('click', 'a[href^="http"]', (event) => {
              event.preventDefault()
              shell.openExternal(event.target.href)
            })

            $('#autolaunch')
              .prop('checked', store.get('autoLaunch'))
              .change((event) => { ipcRenderer.send('setAutoLaunch', event.target.checked) })

            $('#hide-icon')
              .prop('checked', store.get('hideIcon'))
              .change((event) => { ipcRenderer.send('setHideIcon', event.target.checked) })

            $('#mode')
              .val(store.get('mode'))
              .change((event) => { ipcRenderer.send('setMode', event.target.value, false) })

            $('#global-hotkey')
              .val(store.get('globalHotkey'))
              .change((event) => { store.set('globalHotkey', event.target.value) })
        </script>
    </body>
</html>
